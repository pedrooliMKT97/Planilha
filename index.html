<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>Correção de Dados de Produtos</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }
        .container {
            max-width: 1000px;
            margin: 0 auto;
        }
        table {
            border-collapse: collapse;
            width: 100%;
            margin-top: 20px;
        }
        th, td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: left;
        }
        th {
            background-color: #f2f2f2;
        }
        textarea {
            width: 100%;
            height: 150px;
            margin-bottom: 10px;
        }
        button {
            padding: 10px 20px;
            background-color: #4CAF50;
            color: white;
            border: none;
            cursor: pointer;
        }
        button:hover {
            background-color: #45a049;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Corretor de Dados de Produtos</h1>
        
        <textarea id="inputData" placeholder="Cole seus dados aqui diretamente da planilha:
Exemplo:
Frago a pescativo marinado No Ponto kg    R$15,99    R$12,99    -1%
Ponta de Alcatra bovina kg    $545,90    $537,99    -17%"></textarea>
        
        <button onclick="processData()">Processar Dados</button>
        
        <table id="resultTable">
            <thead>
                <tr>
                    <th>Descrição Corrigida</th>
                    <th>Preço Normal</th>
                    <th>Preço App (Reais)</th>
                    <th>Preço App (Centavos)</th>
                    <th>Desconto</th>
                </tr>
            </thead>
            <tbody id="tableBody"></tbody>
        </table>
    </div>

    <script>
        function correctText(text) {
            // Corrige erros comuns e acentos
            const corrections = {
                'Frago': 'Frango',
                'pescativo': 'pescado',
                'Alcatra': 'Alcatra',
                'Língula': 'Linguiça',
                'Pernil': 'Pernil',
                'sumo': 'suíno',
                'Eltezinho': 'Filezinho',
                'G.V.Us': 'GV Us',
                'kg': 'kg',
                'R$': '',
                '$': ''
            };

            return text.split(' ').map(word => {
                // Corrige palavras específicas
                if (corrections[word]) return corrections[word];
                
                // Adiciona acentos (exemplo básico)
                const accentMap = {
                    'marinado': 'marinado',
                    'bovina': 'bovina',
                    'gourmet': 'gourmet',
                    'tradicional': 'tradicional',
                    'empanado': 'empanado'
                };
                
                return accentMap[word.toLowerCase()] || word;
            }).join(' ');
        }

        function processData() {
            const input = document.getElementById('inputData').value;
            const lines = input.split('\n').filter(line => line.trim() !== '');
            const tableBody = document.getElementById('tableBody');
            tableBody.innerHTML = '';

            for (const line of lines) {
                // Divide as colunas com base em múltiplos espaços ou tabulações
                const columns = line.split(/\s{2,}/).map(col => col.trim());
                
                // Extrai os dados (ajuste conforme o formato da sua planilha)
                const desc = columns[0] || '';
                const normalPrice = columns[1] || '';
                const appPrice = columns[2] || '';
                const discount = columns[3] || '';

                // Processa Descrição
                const correctedDesc = correctText(desc);

                // Processa Preço Normal
                const cleanNormalPrice = normalPrice.replace('R$', '').replace('$', '').replace(',', '.').trim();

                // Processa Preço App
                const appPriceClean = appPrice.replace('R$', '').replace('$', '').replace(',', '.').trim();
                const [reais, centavos = '00'] = appPriceClean.includes('.') ? 
                    appPriceClean.split('.') : 
                    [appPriceClean, '00'];

                // Cria nova linha na tabela
                const newRow = document.createElement('tr');
                newRow.innerHTML = `
                    <td>${correctedDesc}</td>
                    <td>${cleanNormalPrice}</td>
                    <td>${reais}</td>
                    <td>.${centavos}</td>
                    <td>${discount}</td>
                `;
                tableBody.appendChild(newRow);
            }
        }
    </script>
</body>
</html>

<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>Correção de Dados de Produtos</title>
    <style>
        /* Estilos mantidos iguais */
        body { font-family: Arial, sans-serif; margin: 20px; }
        .container { max-width: 1000px; margin: 0 auto; }
        table { border-collapse: collapse; width: 100%; margin-top: 20px; }
        th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
        th { background-color: #f2f2f2; }
        textarea { width: 100%; height: 150px; margin-bottom: 10px; }
        button { padding: 10px 20px; background-color: #4CAF50; color: white; border: none; cursor: pointer; }
        button:hover { background-color: #45a049; }
    </style>
</head>
<body>
    <div class="container">
        <h1>Corretor de Dados de Produtos</h1>
        
        <textarea id="inputData" placeholder="Cole seus dados aqui diretamente da planilha:
Exemplo:
Frango marinado kg     R$15,99    R$12,99    -1%    6kg
Pão Francês unid      R$2,50     R$1,99     20%    4un"></textarea>
        
        <button onclick="processData()">Processar Dados</button>
        
        <table id="resultTable">
            <thead>
                <tr>
                    <th>Descrição</th>
                    <th>Preço Normal</th>
                    <th>Preço App (Reais)</th>
                    <th>Preço App (Centavos)</th>
                    <th>Desconto</th>
                    <th>Limite (Qtd)</th>
                    <th>Limite (Unidade)</th>
                </tr>
            </thead>
            <tbody id="tableBody"></tbody>
        </table>
    </div>

    <script>
        function correctText(text) {
            // Correções de texto e unidades na descrição
            const corrections = {
                'kg': 'kg', 'unid': 'unid', 'Gr': 'g', 
                'ml': 'mL', 'Litro': 'L', 'pct': 'pacote', 'perdigao': 'perdigão'
                'file': 'filé', 'musculo': 'muscúlo', 'suino': 'suíno', 'emporio': 'empório',
            };
            
            return text.split(' ').map(word => {
                return corrections[word] || word;
            }).join(' ');
        }

        function processData() {
            const input = document.getElementById('inputData').value;
            const lines = input.split('\n').filter(line => line.trim() !== '');
            const tableBody = document.getElementById('tableBody');
            tableBody.innerHTML = '';

            for (const line of lines) {
                // Divide colunas por múltiplos espaços
                const columns = line.split(/\s{2,}/).map(col => col.trim());
                
                // Extrai as colunas (ajuste os índices conforme sua planilha)
                const [desc, normalPrice, appPrice, discount, limit] = columns;

                // Processa LIMITE
                const limitMatch = limit?.match(/(\d+)(\D+)/) || ['','',''];
                let [qtd, unit] = [limitMatch[1], limitMatch[2].toLowerCase()];
                
                // Padroniza unidades
                unit = unit.replace(/[^a-z]/g, ''); // Remove números extras
                if(['un', 'uni', 'unid'].includes(unit)) unit = 'unid';
                if(['kg', 'kilo', 'quilo'].includes(unit)) unit = 'kg';
                if(['l', 'litro'].includes(unit)) unit = 'L';

                // Processa PREÇOS
                const [reais, centavos] = appPrice.replace('R$','').replace(',','.').split('.');

                // Cria nova linha
                const newRow = document.createElement('tr');
                newRow.innerHTML = `
                    <td>${correctText(desc)}</td>
                    <td>${normalPrice.replace('R$','')}</td>
                    <td>${reais}</td>
                    <td>,${centavos?.padEnd(2,'0') || '00'}</td>
                    <td>${discount}</td>
                    <td>${qtd}</td>
                    <td>${unit}</td>
                `;
                tableBody.appendChild(newRow);
            }
        }
    </script>
</body>
</html>
